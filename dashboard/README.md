# Factorio Megabase Dashboard

A modern, real-time web dashboard for visualizing Factorio statistics exported by the [Factorio Megabase Exporter](../README.md) mod.

![Dashboard Preview](../dashboard.avif)

## Installation

### Prerequisites

- [Bun](https://bun.sh/) runtime
- The Factorio Megabase Exporter mod must be installed and running

### Setup

1. Navigate to the dashboard directory:
   ```bash
   cd dashboard
   ```

2. Install dependencies:
   ```bash
   bun install
   ```

3. Build the dashboard:
   ```bash
   bun run build
   ```

## Usage

### Production Mode

Start the server to serve the built dashboard and API:

```bash
bun run start
```

The dashboard will be available at: **<http://localhost:3000>**

The server provides:

- Static files: Serves the built SvelteKit app
- `/api/stats`: returns the latest stats.json data
- `/api/assets/technology/{name}.png` serves technology icons from Factorio

### Development Mode

For development with hot-reload:

1. Start the Vite dev server:

   ```bash
   bun run dev
   ```

2. In a separate terminal, start the API server:

   ```bash
   bun run start
   ```

The dev server runs on port 5173 by default and proxies API requests to the backend.

## Configuration

### Environment Variables

#### FACTORIO_PATH

Set the path to your Factorio installation directory. This is used to:

- Locate the `stats.json` file at `$FACTORIO_PATH/script-output/megabase-exporter/stats.json`
- Serve technology icons from `$FACTORIO_PATH/data/base/graphics/technology/` and `$FACTORIO_PATH/data/space-age/graphics/technology/`

**Setting FACTORIO_PATH:**

```bash
# Option 1: Set in your shell before running
export FACTORIO_PATH="/path/to/factorio"
bun run start

# Option 2: Set inline when running
FACTORIO_PATH="/path/to/factorio" bun run start

# Option 3: Use the start-dashboard.sh script (auto-detects from mod location)
../start-dashboard.sh
```

### Server Port

To change the server port, edit `server.ts`:

```typescript
const PORT = 3000; // Change to your desired port
```

### Technology Assets

Technology icons are automatically served from the Factorio installation. The server searches these directories in order:

1. `$FACTORIO_PATH/data/base/graphics/technology/`
2. `$FACTORIO_PATH/data/space-age/graphics/technology/`

Assets are accessible via: `http://localhost:3000/api/assets/technology/{technology-name}.png`

For example:

- `http://localhost:3000/api/assets/technology/automation-2.png`
- `http://localhost:3000/api/assets/technology/steel-processing.png`

The dashboard automatically uses these assets to display technology icons in the Research Progress and Research Queue components.

## AI disclosure

Generated by Claude models in Cursor.
